"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6688],{6688:(R,c,t)=>{t.r(c),t.d(c,{LoginPageModule:()=>T});var m=t(177),l=t(4341),a=t(4742),g=t(4964),f=t(467),o=t(3953),v=t(7133),p=t(2518),h=t(3695);function L(e,s){1&e&&(o.j41(0,"div"),o.EFF(1,"El correo es requerido"),o.k0s())}function y(e,s){1&e&&(o.j41(0,"div"),o.EFF(1,"Ingrese un correo valido"),o.k0s())}function P(e,s){if(1&e&&(o.j41(0,"div",12),o.DNE(1,L,2,0,"div",13)(2,y,2,0,"div",13),o.k0s()),2&e){const r=o.XpG();o.R7$(),o.Y8G("ngIf",null==r.form.controls.email.errors?null:r.form.controls.email.errors.required),o.R7$(),o.Y8G("ngIf",null==r.form.controls.email.errors?null:r.form.controls.email.errors.email)}}function I(e,s){1&e&&(o.j41(0,"div"),o.EFF(1,"La contrase\xf1a es requerido"),o.k0s())}function b(e,s){if(1&e&&(o.j41(0,"div",12),o.DNE(1,I,2,0,"div",13),o.k0s()),2&e){const r=o.XpG();o.R7$(),o.Y8G("ngIf",null==r.form.controls.password.errors?null:r.form.controls.password.errors.required)}}const F=[{path:"",component:(()=>{var e;class s{constructor(i){this.menuCtrl=i,this.form=new l.gE({email:new l.MJ("",[l.k0.required,l.k0.email]),password:new l.MJ("",[l.k0.required])}),this.firebaseSvc=(0,o.WQX)(v.f),this.utilsSvc=(0,o.WQX)(p.T)}ngOnInit(){this.menuCtrl.enable(!1)}submit(){var i=this;return(0,f.A)(function*(){if(i.form.valid){const n=yield i.utilsSvc.loading();yield n.present(),i.firebaseSvc.resetUserData(),i.firebaseSvc.signIn(i.form.value).then(d=>{i.getUserInfo(d.user.uid)}).catch(d=>{console.log(d),i.utilsSvc.presentToast({message:d.message,duration:2e3,color:"primary",position:"middle",icon:"alert-circle-outline"})}).finally(()=>{n.dismiss()})}})()}getUserInfo(i){var n=this;return(0,f.A)(function*(){if(n.form.valid){const d=yield n.utilsSvc.loading();yield d.present(),n.firebaseSvc.getDocument(`users/${i}`).then(u=>{u?(n.utilsSvc.saveInLocalStorage("user",u),"estudiante"===u.tipo?n.utilsSvc.routerLink("/main-estudiante/home"):"profesor"===u.tipo&&n.utilsSvc.routerLink("/main-profesor/home-profesor"),n.form.reset(),n.utilsSvc.presentToast({message:`Te damos la bienvenida ${u.name}`,duration:1500,color:"primary",position:"middle",icon:"person-circle-outline"})):console.error("No se encontraron datos del usuario.")}).catch(u=>{console.log(u)}).finally(()=>{d.dismiss()})}})()}recuperar(){this.utilsSvc.routerLink("/olvidada")}}return(e=s).\u0275fac=function(i){return new(i||e)(o.rXU(a._t))},e.\u0275cmp=o.VBU({type:e,selectors:[["app-login"]],decls:19,vars:6,consts:[["slot","start"],["color","tertiary","defaultHref","lanzamiento","text","Volver","mode","ios"],[1,"ion-padding"],["color","tertiary",1,"ion-text-center"],[1,"d-flex-center"],[1,"auth-form",3,"ngSubmit","keypress.enter","formGroup"],["autocomplete","email","icon","mail-outline","type","email","label","Correo",3,"control"],["class","validators",4,"ngIf"],["icon","lock-closed-outline","type","password","label","Contrase\xf1a",3,"control"],["color","tertiary","expand","block","mode","ios","type","submit",1,"submit",3,"disabled"],["slot","end","name","log-in-outline"],["color","tertiary","expand","full","fill","outline",1,"ion-padding",3,"click"],[1,"validators"],[4,"ngIf"]],template:function(i,n){1&i&&(o.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),o.nrm(3,"ion-back-button",1),o.k0s()()(),o.j41(4,"ion-content",2)(5,"ion-text",3)(6,"h1"),o.EFF(7,"Inicio de sesion"),o.k0s()(),o.j41(8,"div",4)(9,"form",5),o.bIt("ngSubmit",function(){return n.submit()})("keypress.enter",function(){return n.submit()}),o.nrm(10,"app-custom-input",6),o.DNE(11,P,3,2,"div",7),o.nrm(12,"app-custom-input",8),o.DNE(13,b,2,1,"div",7),o.j41(14,"ion-button",9),o.EFF(15," Ingresar "),o.nrm(16,"ion-icon",10),o.k0s(),o.j41(17,"ion-button",11),o.bIt("click",function(){return n.recuperar()}),o.EFF(18," \xbfOlvidaste tu contrase\xf1a? "),o.k0s()()()()),2&i&&(o.R7$(9),o.Y8G("formGroup",n.form),o.R7$(),o.Y8G("control",n.form.controls.email),o.R7$(),o.Y8G("ngIf",n.form.controls.email.errors&&n.form.controls.email.touched),o.R7$(),o.Y8G("control",n.form.controls.password),o.R7$(),o.Y8G("ngIf",n.form.controls.password.errors&&n.form.controls.password.touched),o.R7$(),o.Y8G("disabled",n.form.invalid))},dependencies:[m.bT,l.qT,l.cb,a.Jm,a.QW,a.W9,a.eU,a.iq,a.IO,a.ai,a.el,h.H,l.j4]}),s})(),children:[{path:"registro",loadChildren:()=>t.e(2076).then(t.bind(t,420)).then(e=>e.RegistroPageModule)},{path:"olvidada",loadChildren:()=>t.e(2076).then(t.bind(t,7506)).then(e=>e.OlvidadaPageModule)}]}];let S=(()=>{var e;class s{}return(e=s).\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[g.iI.forChild(F),g.iI]}),s})();var G=t(5553);let T=(()=>{var e;class s{}return(e=s).\u0275fac=function(i){return new(i||e)},e.\u0275mod=o.$C({type:e}),e.\u0275inj=o.G2t({imports:[m.MD,l.YN,a.bv,S,G.h]}),s})()}}]);