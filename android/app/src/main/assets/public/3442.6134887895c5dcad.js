(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3442],{3442:(N,i,l)=>{"use strict";l.r(i),l.d(i,{GenerarProfesorPageModule:()=>F});var s=l(177),n=l(4341),t=l(4742),r=l(4964),o=l(467),e=l(3953),c=l(2518),u=l(7762),m=l(7133),p=l(9415),P=l(5933);function w(d,C){if(1&d&&e.nrm(0,"canvas",1),2&d){const g=e.XpG();e.HbH(g.styleClass),e.Y8G("qrCode",g.value)("qrCodeErrorCorrectionLevel",g.errorCorrectionLevel)("qrCodeCenterImageSrc",g.centerImageSrc)("qrCodeCenterImageWidth",g.centerImageSize)("qrCodeCenterImageHeight",g.centerImageSize)("qrCodeMargin",g.margin)("width",g.size)("height",g.size)("ngStyle",g.style)("darkColor",g.darkColor)("lightColor",g.lightColor)}}const y=/^#(?:[0-9a-fA-F]{3,4}){1,2}$/;let I=(()=>{var d;class C{constructor(a){this.viewContainerRef=a,this.errorCorrectionLevel=C.DEFAULT_ERROR_CORRECTION_LEVEL,this.darkColor="#000000FF",this.lightColor="#FFFFFFFF",this.margin=16}ngOnChanges(){var a=this;return(0,o.A)(function*(){var f;if(!a.value)return;a.version&&a.version>40?(console.warn("[qrCode] max version is 40, clamping"),a.version=40):a.version&&a.version<1?(console.warn("[qrCode] min version is 1, clamping"),a.version=1):void 0!==a.version&&isNaN(a.version)&&(console.warn("[qrCode] version should be set to a number, defaulting to auto"),a.version=void 0);const E=a.viewContainerRef.element.nativeElement;if(!E)return;const h=E.getContext("2d");h&&h.clearRect(0,0,h.canvas.width,h.canvas.height);const T=null!==(f=a.errorCorrectionLevel)&&void 0!==f?f:C.DEFAULT_ERROR_CORRECTION_LEVEL,B=y.test(a.darkColor)?a.darkColor:void 0,D=y.test(a.lightColor)?a.lightColor:void 0;(0,e.naY)()&&(!B&&a.darkColor&&console.error("[ng-qrcode] darkColor set to invalid value, must be RGBA hex color string, eg: #3050A1FF"),!D&&a.lightColor&&console.error("[ng-qrcode] lightColor set to invalid value, must be RGBA hex color string, eg: #3050A130")),yield P.toCanvas(E,a.value,{version:a.version,errorCorrectionLevel:T,width:a.width,margin:a.margin,color:{dark:B,light:D}});const U=a.centerImageSrc,O=b(a.centerImageWidth,C.DEFAULT_CENTER_IMAGE_SIZE),G=b(a.centerImageHeight,C.DEFAULT_CENTER_IMAGE_SIZE);if(U&&h){a.centerImage||(a.centerImage=new Image(O,G));const H=a.centerImage;U!==a.centerImage.src&&(H.src=U),O!==a.centerImage.width&&(H.width=O),G!==a.centerImage.height&&(H.height=G);const V=()=>{h.drawImage(H,E.width/2-O/2,E.height/2-G/2,O,G)};H.onload=V,H.complete&&V()}})()}}return(d=C).DEFAULT_ERROR_CORRECTION_LEVEL="M",d.DEFAULT_CENTER_IMAGE_SIZE=40,d.\u0275fac=function(a){return new(a||d)(e.rXU(e.c1b))},d.\u0275dir=e.FsC({type:d,selectors:[["canvas","qrCode",""]],inputs:{value:[0,"qrCode","value"],version:[0,"qrCodeVersion","version"],errorCorrectionLevel:[0,"qrCodeErrorCorrectionLevel","errorCorrectionLevel"],width:"width",height:"height",darkColor:"darkColor",lightColor:"lightColor",centerImageSrc:[0,"qrCodeCenterImageSrc","centerImageSrc"],centerImageWidth:[0,"qrCodeCenterImageWidth","centerImageWidth"],centerImageHeight:[0,"qrCodeCenterImageHeight","centerImageHeight"],margin:[0,"qrCodeMargin","margin"]},features:[e.OA$]}),C})();function b(d,C){return void 0===d||""===d?C:"string"==typeof d?parseInt(d,10):d}let L=(()=>{var d;class C{}return(d=C).\u0275fac=function(a){return new(a||d)},d.\u0275cmp=e.VBU({type:d,selectors:[["qr-code"]],inputs:{value:"value",size:"size",style:"style",styleClass:"styleClass",darkColor:"darkColor",lightColor:"lightColor",errorCorrectionLevel:"errorCorrectionLevel",centerImageSrc:"centerImageSrc",centerImageSize:"centerImageSize",margin:"margin"},decls:1,vars:1,consts:[[3,"qrCode","qrCodeErrorCorrectionLevel","qrCodeCenterImageSrc","qrCodeCenterImageWidth","qrCodeCenterImageHeight","qrCodeMargin","width","height","class","ngStyle","darkColor","lightColor"],[3,"qrCode","qrCodeErrorCorrectionLevel","qrCodeCenterImageSrc","qrCodeCenterImageWidth","qrCodeCenterImageHeight","qrCodeMargin","width","height","ngStyle","darkColor","lightColor"]],template:function(a,f){1&a&&e.DNE(0,w,1,13,"canvas",0),2&a&&e.vxM(f.value?0:-1)},dependencies:[s.B3,I],encapsulation:2}),C})(),M=(()=>{var d;class C{}return(d=C).\u0275fac=function(a){return new(a||d)},d.\u0275mod=e.$C({type:d}),d.\u0275inj=e.G2t({imports:[s.MD]}),C})();const S=[{path:"",component:(()=>{var d;class C{constructor(a,f,E){this.route=a,this.alertController=f,this.menuCtrl=E,this.seccion=null,this.nombreAsignatura="",this.profesorNombre="",this.aula="xxx-x",this.firebaseSvc=(0,e.WQX)(m.f),this.utilsSvc=(0,e.WQX)(c.T)}user(){return this.utilsSvc.getFromLocalStorage("user")}obtenerDatosSeccion(a){var f=this;return(0,o.A)(function*(){const E=yield f.utilsSvc.loading();yield E.present();try{if(f.seccion=yield f.firebaseSvc.getSeccionPorId(a),console.log("Datos de la secci\xf3n:",f.seccion),f.seccion){const h=yield f.firebaseSvc.getAsignaturaPorId(f.seccion.asignatura);h&&(f.nombreAsignatura=h.nombre,f.aula=f.seccion.aula),f.profesorNombre=f.user().name+" "+f.user().lastname,f.generateQRCode()}}catch(h){console.error("Error obteniendo la secci\xf3n:",h)}E.dismiss()})()}generateQRCode(){var a=this;return(0,o.A)(function*(){const f=new Date;a.currentDate=f.toLocaleDateString(),a.currentTime=f.toLocaleTimeString();const E=crypto.randomUUID(),h=yield a.getCurrentLocation();h?(a.latitude=h.latitude,a.longitude=h.longitude,a.altitude=null!==h.altitude?h.altitude:"N/A",a.qrData=`UID: ${E}, Fecha: ${a.currentDate}, Hora: ${a.currentTime}, Asignatura: ${a.nombreAsignatura}, Secci\xf3n: ${a.seccionId||"Sin nombre"}, Ubicaci\xf3n: ${a.latitude}, ${a.longitude}, Altitud: ${a.altitude}`,console.log("Latitud:",a.latitude),console.log("Longitud:",a.longitude),console.log("Altitud:",a.altitude),console.log(a.qrData)):a.utilsSvc.showToast("Error obteniendo la ubicaci\xf3n. Int\xe9ntalo de nuevo.")})()}getCurrentLocation(){return(0,o.A)(function*(){try{const a=yield u.L.getCurrentPosition({enableHighAccuracy:!0});return{latitude:a.coords.latitude,longitude:a.coords.longitude,altitude:null!==a.coords.altitude?a.coords.altitude:0}}catch(a){return console.error("Error obteniendo la ubicaci\xf3n:",a),null}})()}ngOnInit(){this.generateQRCode(),this.seccionId=this.route.snapshot.paramMap.get("seccionId")||"",console.log("ID de secci\xf3n a buscar:",this.seccionId),this.seccionId?this.obtenerDatosSeccion(this.seccionId):console.error("Secci\xf3n ID no proporcionado")}Finalizar(){var a=this;return(0,o.A)(function*(){yield(yield a.alertController.create({header:"Registrar asistencia",message:"\xbfDesea finalizar la toma de asistencia?",backdropDismiss:!1,buttons:[{text:"Cancelar",role:"cancel",handler:()=>{console.log("Bot\xf3n Cancelar")}},{text:"OK",role:"confirm",handler:()=>{a.qrData="",a.utilsSvc.showToast("La toma de asistencia ha finalizado."),a.navegar()}}]})).present()})()}navegar(){this.utilsSvc.routerLink("/main-estudiante/home-profesor")}}return(d=C).\u0275fac=function(a){return new(a||d)(e.rXU(r.nX),e.rXU(t.hG),e.rXU(t._t))},d.\u0275cmp=e.VBU({type:d,selectors:[["app-generar-profesor"]],decls:27,vars:10,consts:[["titulo","Asistencia"],[1,"ion-padding"],[1,"ion-justify-content-center","ion-align-items-center",2,"height","100%"],["size","auto"],["size","300","errorCorrectionLevel","M",3,"value"],["color","tertiary","shape","round","expand","block",1,"ion-padding",3,"click"]],template:function(a,f){1&a&&(e.nrm(0,"app-encabezado",0),e.j41(1,"ion-content",1)(2,"ion-item")(3,"ion-label")(4,"h1"),e.EFF(5),e.k0s(),e.j41(6,"p"),e.EFF(7),e.k0s(),e.j41(8,"p"),e.EFF(9),e.k0s()()(),e.j41(10,"ion-item")(11,"ion-label")(12,"h2"),e.EFF(13,"Informaci\xf3n"),e.k0s(),e.j41(14,"p"),e.EFF(15),e.k0s(),e.j41(16,"p"),e.EFF(17),e.k0s(),e.j41(18,"p"),e.EFF(19),e.k0s()()(),e.j41(20,"ion-grid")(21,"ion-row",2)(22,"ion-col",3)(23,"div"),e.nrm(24,"qr-code",4),e.k0s()()()(),e.j41(25,"ion-button",5),e.bIt("click",function(){return f.Finalizar()}),e.EFF(26,"Finalizar"),e.k0s()()),2&a&&(e.R7$(5),e.JRh(f.nombreAsignatura),e.R7$(2),e.SpI("Profesor: ",f.profesorNombre,""),e.R7$(2),e.SpI("Aula: ",f.aula,""),e.R7$(6),e.SpI("Secci\xf3n: ",null==f.seccion?null:f.seccion.nombre,""),e.R7$(2),e.Lme("Fecha: ",f.currentDate," _____ Hora: ",f.currentTime,""),e.R7$(2),e.E5c("Ubicacion: ",f.latitude,", ",f.longitude,", ",f.altitude,""),e.R7$(5),e.Y8G("value",f.qrData))},dependencies:[t.Jm,t.hU,t.W9,t.lO,t.uz,t.he,t.ln,p.w,L]}),C})()}];let A=(()=>{var d;class C{}return(d=C).\u0275fac=function(a){return new(a||d)},d.\u0275mod=e.$C({type:d}),d.\u0275inj=e.G2t({imports:[r.iI.forChild(S),r.iI]}),C})();var v=l(5553);let F=(()=>{var d;class C{}return(d=C).\u0275fac=function(a){return new(a||d)},d.\u0275mod=e.$C({type:d}),d.\u0275inj=e.G2t({imports:[s.MD,n.YN,t.bv,A,v.h,M]}),C})()},2624:N=>{"use strict";var i={single_source_shortest_paths:function(l,s,n){var t={},r={};r[s]=0;var e,c,u,m,p,w,o=i.PriorityQueue.make();for(o.push(s,0);!o.empty();)for(u in m=(e=o.pop()).cost,p=l[c=e.value]||{})p.hasOwnProperty(u)&&(w=m+p[u],(typeof r[u]>"u"||r[u]>w)&&(r[u]=w,o.push(u,w),t[u]=c));if(typeof n<"u"&&typeof r[n]>"u"){var b=["Could not find a path from ",s," to ",n,"."].join("");throw new Error(b)}return t},extract_shortest_path_from_predecessor_list:function(l,s){for(var n=[],t=s;t;)n.push(t),t=l[t];return n.reverse(),n},find_path:function(l,s,n){var t=i.single_source_shortest_paths(l,s,n);return i.extract_shortest_path_from_predecessor_list(t,n)},PriorityQueue:{make:function(l){var t,s=i.PriorityQueue,n={};for(t in l=l||{},s)s.hasOwnProperty(t)&&(n[t]=s[t]);return n.queue=[],n.sorter=l.sorter||s.default_sorter,n},default_sorter:function(l,s){return l.cost-s.cost},push:function(l,s){this.queue.push({value:l,cost:s}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};N.exports=i},5933:(N,i,l)=>{const s=l(2836),n=l(9460),t=l(4649),r=l(6511);function o(e,c,u,m,p){const P=[].slice.call(arguments,1),w=P.length,y="function"==typeof P[w-1];if(!y&&!s())throw new Error("Callback required as last argument");if(!y){if(w<1)throw new Error("Too few arguments provided");return 1===w?(u=c,c=m=void 0):2===w&&!c.getContext&&(m=u,u=c,c=void 0),new Promise(function(I,b){try{const L=n.create(u,m);I(e(L,c,m))}catch(L){b(L)}})}if(w<2)throw new Error("Too few arguments provided");2===w?(p=u,u=c,c=m=void 0):3===w&&(c.getContext&&typeof p>"u"?(p=m,m=void 0):(p=m,m=u,u=c,c=void 0));try{const I=n.create(u,m);p(null,e(I,c,m))}catch(I){p(I)}}i.create=n.create,i.toCanvas=o.bind(null,t.render),i.toDataURL=o.bind(null,t.renderToDataURL),i.toString=o.bind(null,function(e,c,u){return r.render(e,u)})},2836:N=>{N.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},6214:(N,i,l)=>{const s=l(9089).getSymbolSize;i.getRowColCoords=function(t){if(1===t)return[];const r=Math.floor(t/7)+2,o=s(t),e=145===o?26:2*Math.ceil((o-13)/(2*r-2)),c=[o-7];for(let u=1;u<r-1;u++)c[u]=c[u-1]-e;return c.push(6),c.reverse()},i.getPositions=function(t){const r=[],o=i.getRowColCoords(t),e=o.length;for(let c=0;c<e;c++)for(let u=0;u<e;u++)0===c&&0===u||0===c&&u===e-1||c===e-1&&0===u||r.push([o[c],o[u]]);return r}},1018:(N,i,l)=>{const s=l(1677),n=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function t(r){this.mode=s.ALPHANUMERIC,this.data=r}t.getBitsLength=function(o){return 11*Math.floor(o/2)+o%2*6},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(o){let e;for(e=0;e+2<=this.data.length;e+=2){let c=45*n.indexOf(this.data[e]);c+=n.indexOf(this.data[e+1]),o.put(c,11)}this.data.length%2&&o.put(n.indexOf(this.data[e]),6)},N.exports=t},4662:N=>{function i(){this.buffer=[],this.length=0}i.prototype={get:function(l){const s=Math.floor(l/8);return 1==(this.buffer[s]>>>7-l%8&1)},put:function(l,s){for(let n=0;n<s;n++)this.putBit(1==(l>>>s-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(l){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),l&&(this.buffer[s]|=128>>>this.length%8),this.length++}},N.exports=i},5941:N=>{function i(l){if(!l||l<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=l,this.data=new Uint8Array(l*l),this.reservedBit=new Uint8Array(l*l)}i.prototype.set=function(l,s,n,t){const r=l*this.size+s;this.data[r]=n,t&&(this.reservedBit[r]=!0)},i.prototype.get=function(l,s){return this.data[l*this.size+s]},i.prototype.xor=function(l,s,n){this.data[l*this.size+s]^=n},i.prototype.isReserved=function(l,s){return this.reservedBit[l*this.size+s]},N.exports=i},4969:(N,i,l)=>{const s=l(1677);function n(t){this.mode=s.BYTE,this.data="string"==typeof t?(new TextEncoder).encode(t):new Uint8Array(t)}n.getBitsLength=function(r){return 8*r},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(t){for(let r=0,o=this.data.length;r<o;r++)t.put(this.data[r],8)},N.exports=n},3677:(N,i,l)=>{const s=l(7424),n=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],t=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];i.getBlocksCount=function(o,e){switch(e){case s.L:return n[4*(o-1)+0];case s.M:return n[4*(o-1)+1];case s.Q:return n[4*(o-1)+2];case s.H:return n[4*(o-1)+3];default:return}},i.getTotalCodewordsCount=function(o,e){switch(e){case s.L:return t[4*(o-1)+0];case s.M:return t[4*(o-1)+1];case s.Q:return t[4*(o-1)+2];case s.H:return t[4*(o-1)+3];default:return}}},7424:(N,i)=>{i.L={bit:1},i.M={bit:0},i.Q={bit:3},i.H={bit:2},i.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},i.from=function(n,t){if(i.isValid(n))return n;try{return function l(s){if("string"!=typeof s)throw new Error("Param is not a string");switch(s.toLowerCase()){case"l":case"low":return i.L;case"m":case"medium":return i.M;case"q":case"quartile":return i.Q;case"h":case"high":return i.H;default:throw new Error("Unknown EC Level: "+s)}}(n)}catch{return t}}},6269:(N,i,l)=>{const s=l(9089).getSymbolSize;i.getPositions=function(r){const o=s(r);return[[0,0],[o-7,0],[0,o-7]]}},6254:(N,i,l)=>{const s=l(9089),r=s.getBCHDigit(1335);i.getEncodedBits=function(e,c){const u=e.bit<<3|c;let m=u<<10;for(;s.getBCHDigit(m)-r>=0;)m^=1335<<s.getBCHDigit(m)-r;return 21522^(u<<10|m)}},6686:(N,i)=>{const l=new Uint8Array(512),s=new Uint8Array(256);(function(){let t=1;for(let r=0;r<255;r++)l[r]=t,s[t]=r,t<<=1,256&t&&(t^=285);for(let r=255;r<512;r++)l[r]=l[r-255]})(),i.log=function(t){if(t<1)throw new Error("log("+t+")");return s[t]},i.exp=function(t){return l[t]},i.mul=function(t,r){return 0===t||0===r?0:l[s[t]+s[r]]}},3264:(N,i,l)=>{const s=l(1677),n=l(9089);function t(r){this.mode=s.KANJI,this.data=r}t.getBitsLength=function(o){return 13*o},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let o;for(o=0;o<this.data.length;o++){let e=n.toSJIS(this.data[o]);if(e>=33088&&e<=40956)e-=33088;else{if(!(e>=57408&&e<=60351))throw new Error("Invalid SJIS character: "+this.data[o]+"\nMake sure your charset is UTF-8");e-=49472}e=192*(e>>>8&255)+(255&e),r.put(e,13)}},N.exports=t},3361:(N,i)=>{i.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function s(n,t,r){switch(n){case i.Patterns.PATTERN000:return(t+r)%2==0;case i.Patterns.PATTERN001:return t%2==0;case i.Patterns.PATTERN010:return r%3==0;case i.Patterns.PATTERN011:return(t+r)%3==0;case i.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case i.Patterns.PATTERN101:return t*r%2+t*r%3==0;case i.Patterns.PATTERN110:return(t*r%2+t*r%3)%2==0;case i.Patterns.PATTERN111:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+n)}}i.isValid=function(t){return null!=t&&""!==t&&!isNaN(t)&&t>=0&&t<=7},i.from=function(t){return i.isValid(t)?parseInt(t,10):void 0},i.getPenaltyN1=function(t){const r=t.size;let o=0,e=0,c=0,u=null,m=null;for(let p=0;p<r;p++){e=c=0,u=m=null;for(let P=0;P<r;P++){let w=t.get(p,P);w===u?e++:(e>=5&&(o+=e-5+3),u=w,e=1),w=t.get(P,p),w===m?c++:(c>=5&&(o+=c-5+3),m=w,c=1)}e>=5&&(o+=e-5+3),c>=5&&(o+=c-5+3)}return o},i.getPenaltyN2=function(t){const r=t.size;let o=0;for(let e=0;e<r-1;e++)for(let c=0;c<r-1;c++){const u=t.get(e,c)+t.get(e,c+1)+t.get(e+1,c)+t.get(e+1,c+1);(4===u||0===u)&&o++}return 3*o},i.getPenaltyN3=function(t){const r=t.size;let o=0,e=0,c=0;for(let u=0;u<r;u++){e=c=0;for(let m=0;m<r;m++)e=e<<1&2047|t.get(u,m),m>=10&&(1488===e||93===e)&&o++,c=c<<1&2047|t.get(m,u),m>=10&&(1488===c||93===c)&&o++}return 40*o},i.getPenaltyN4=function(t){let r=0;const o=t.data.length;for(let c=0;c<o;c++)r+=t.data[c];return 10*Math.abs(Math.ceil(100*r/o/5)-10)},i.applyMask=function(t,r){const o=r.size;for(let e=0;e<o;e++)for(let c=0;c<o;c++)r.isReserved(c,e)||r.xor(c,e,s(t,c,e))},i.getBestMask=function(t,r){const o=Object.keys(i.Patterns).length;let e=0,c=1/0;for(let u=0;u<o;u++){r(u),i.applyMask(u,t);const m=i.getPenaltyN1(t)+i.getPenaltyN2(t)+i.getPenaltyN3(t)+i.getPenaltyN4(t);i.applyMask(u,t),m<c&&(c=m,e=u)}return e}},1677:(N,i,l)=>{const s=l(377),n=l(9359);i.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},i.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},i.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},i.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},i.MIXED={bit:-1},i.getCharCountIndicator=function(o,e){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!s.isValid(e))throw new Error("Invalid version: "+e);return e>=1&&e<10?o.ccBits[0]:e<27?o.ccBits[1]:o.ccBits[2]},i.getBestModeForData=function(o){return n.testNumeric(o)?i.NUMERIC:n.testAlphanumeric(o)?i.ALPHANUMERIC:n.testKanji(o)?i.KANJI:i.BYTE},i.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},i.isValid=function(o){return o&&o.bit&&o.ccBits},i.from=function(o,e){if(i.isValid(o))return o;try{return function t(r){if("string"!=typeof r)throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return i.NUMERIC;case"alphanumeric":return i.ALPHANUMERIC;case"kanji":return i.KANJI;case"byte":return i.BYTE;default:throw new Error("Unknown mode: "+r)}}(o)}catch{return e}}},6628:(N,i,l)=>{const s=l(1677);function n(t){this.mode=s.NUMERIC,this.data=t.toString()}n.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(r){let o,e,c;for(o=0;o+3<=this.data.length;o+=3)e=this.data.substr(o,3),c=parseInt(e,10),r.put(c,10);const u=this.data.length-o;u>0&&(e=this.data.substr(o),c=parseInt(e,10),r.put(c,3*u+1))},N.exports=n},1744:(N,i,l)=>{const s=l(6686);i.mul=function(t,r){const o=new Uint8Array(t.length+r.length-1);for(let e=0;e<t.length;e++)for(let c=0;c<r.length;c++)o[e+c]^=s.mul(t[e],r[c]);return o},i.mod=function(t,r){let o=new Uint8Array(t);for(;o.length-r.length>=0;){const e=o[0];for(let u=0;u<r.length;u++)o[u]^=s.mul(r[u],e);let c=0;for(;c<o.length&&0===o[c];)c++;o=o.slice(c)}return o},i.generateECPolynomial=function(t){let r=new Uint8Array([1]);for(let o=0;o<t;o++)r=i.mul(r,new Uint8Array([1,s.exp(o)]));return r}},9460:(N,i,l)=>{const s=l(9089),n=l(7424),t=l(4662),r=l(5941),o=l(6214),e=l(6269),c=l(3361),u=l(3677),m=l(6289),p=l(1252),P=l(6254),w=l(1677),y=l(2868);function R(d,C,g){const a=d.size,f=P.getEncodedBits(C,g);let E,h;for(E=0;E<15;E++)h=1==(f>>E&1),d.set(E<6?E:E<8?E+1:a-15+E,8,h,!0),d.set(8,E<8?a-E-1:E<9?15-E-1+1:15-E-1,h,!0);d.set(a-8,8,1,!0)}function F(d,C,g,a){let f;if(Array.isArray(d))f=y.fromArray(d);else{if("string"!=typeof d)throw new Error("Invalid data");{let D=C;if(!D){const U=y.rawSplit(d);D=p.getBestVersionForData(U,g)}f=y.fromString(d,D||40)}}const E=p.getBestVersionForData(f,g);if(!E)throw new Error("The amount of data is too big to be stored in a QR Code");if(C){if(C<E)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+E+".\n")}else C=E;const h=function A(d,C,g){const a=new t;g.forEach(function(B){a.put(B.mode.bit,4),a.put(B.getLength(),w.getCharCountIndicator(B.mode,d)),B.write(a)});const h=8*(s.getSymbolTotalCodewords(d)-u.getTotalCodewordsCount(d,C));for(a.getLengthInBits()+4<=h&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(0);const T=(h-a.getLengthInBits())/8;for(let B=0;B<T;B++)a.put(B%2?17:236,8);return function v(d,C,g){const a=s.getSymbolTotalCodewords(C),E=a-u.getTotalCodewordsCount(C,g),h=u.getBlocksCount(C,g),B=h-a%h,D=Math.floor(a/h),U=Math.floor(E/h),O=U+1,G=D-U,H=new m(G);let V=0;const J=new Array(h),Y=new Array(h);let $=0;const X=new Uint8Array(d.buffer);for(let K=0;K<h;K++){const Q=K<B?U:O;J[K]=X.slice(V,V+Q),Y[K]=H.encode(J[K]),V+=Q,$=Math.max($,Q)}const j=new Uint8Array(a);let k,z,W=0;for(k=0;k<$;k++)for(z=0;z<h;z++)k<J[z].length&&(j[W++]=J[z][k]);for(k=0;k<G;k++)for(z=0;z<h;z++)j[W++]=Y[z][k];return j}(a,d,C)}(C,g,f),T=s.getSymbolSize(C),B=new r(T);return function I(d,C){const g=d.size,a=e.getPositions(C);for(let f=0;f<a.length;f++){const E=a[f][0],h=a[f][1];for(let T=-1;T<=7;T++)if(!(E+T<=-1||g<=E+T))for(let B=-1;B<=7;B++)h+B<=-1||g<=h+B||d.set(E+T,h+B,T>=0&&T<=6&&(0===B||6===B)||B>=0&&B<=6&&(0===T||6===T)||T>=2&&T<=4&&B>=2&&B<=4,!0)}}(B,C),function b(d){const C=d.size;for(let g=8;g<C-8;g++){const a=g%2==0;d.set(g,6,a,!0),d.set(6,g,a,!0)}}(B),function L(d,C){const g=o.getPositions(C);for(let a=0;a<g.length;a++){const f=g[a][0],E=g[a][1];for(let h=-2;h<=2;h++)for(let T=-2;T<=2;T++)d.set(f+h,E+T,-2===h||2===h||-2===T||2===T||0===h&&0===T,!0)}}(B,C),R(B,g,0),C>=7&&function M(d,C){const g=d.size,a=p.getEncodedBits(C);let f,E,h;for(let T=0;T<18;T++)f=Math.floor(T/3),E=T%3+g-8-3,h=1==(a>>T&1),d.set(f,E,h,!0),d.set(E,f,h,!0)}(B,C),function S(d,C){const g=d.size;let a=-1,f=g-1,E=7,h=0;for(let T=g-1;T>0;T-=2)for(6===T&&T--;;){for(let B=0;B<2;B++)if(!d.isReserved(f,T-B)){let D=!1;h<C.length&&(D=1==(C[h]>>>E&1)),d.set(f,T-B,D),E--,-1===E&&(h++,E=7)}if(f+=a,f<0||g<=f){f-=a,a=-a;break}}}(B,h),isNaN(a)&&(a=c.getBestMask(B,R.bind(null,B,g))),c.applyMask(a,B),R(B,g,a),{modules:B,version:C,errorCorrectionLevel:g,maskPattern:a,segments:f}}i.create=function(C,g){if(typeof C>"u"||""===C)throw new Error("No input text");let f,E,a=n.M;return typeof g<"u"&&(a=n.from(g.errorCorrectionLevel,n.M),f=p.from(g.version),E=c.from(g.maskPattern),g.toSJISFunc&&s.setToSJISFunction(g.toSJISFunc)),F(C,f,a,E)}},6289:(N,i,l)=>{const s=l(1744);function n(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}n.prototype.initialize=function(r){this.degree=r,this.genPoly=s.generateECPolynomial(this.degree)},n.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const o=new Uint8Array(r.length+this.degree);o.set(r);const e=s.mod(o,this.genPoly),c=this.degree-e.length;if(c>0){const u=new Uint8Array(this.degree);return u.set(e,c),u}return e},N.exports=n},9359:(N,i)=>{const l="[0-9]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const t="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+")(?:.|[\r\n]))+";i.KANJI=new RegExp(n,"g"),i.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),i.BYTE=new RegExp(t,"g"),i.NUMERIC=new RegExp(l,"g"),i.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const r=new RegExp("^"+n+"$"),o=new RegExp("^"+l+"$"),e=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");i.testKanji=function(u){return r.test(u)},i.testNumeric=function(u){return o.test(u)},i.testAlphanumeric=function(u){return e.test(u)}},2868:(N,i,l)=>{const s=l(1677),n=l(6628),t=l(1018),r=l(4969),o=l(3264),e=l(9359),c=l(9089),u=l(2624);function m(M){return unescape(encodeURIComponent(M)).length}function p(M,R,S){const A=[];let v;for(;null!==(v=M.exec(S));)A.push({data:v[0],index:v.index,mode:R,length:v[0].length});return A}function P(M){const R=p(e.NUMERIC,s.NUMERIC,M),S=p(e.ALPHANUMERIC,s.ALPHANUMERIC,M);let A,v;return c.isKanjiModeEnabled()?(A=p(e.BYTE,s.BYTE,M),v=p(e.KANJI,s.KANJI,M)):(A=p(e.BYTE_KANJI,s.BYTE,M),v=[]),R.concat(S,A,v).sort(function(d,C){return d.index-C.index}).map(function(d){return{data:d.data,mode:d.mode,length:d.length}})}function w(M,R){switch(R){case s.NUMERIC:return n.getBitsLength(M);case s.ALPHANUMERIC:return t.getBitsLength(M);case s.KANJI:return o.getBitsLength(M);case s.BYTE:return r.getBitsLength(M)}}function L(M,R){let S;const A=s.getBestModeForData(M);if(S=s.from(R,A),S!==s.BYTE&&S.bit<A.bit)throw new Error('"'+M+'" cannot be encoded with mode '+s.toString(S)+".\n Suggested mode is: "+s.toString(A));switch(S===s.KANJI&&!c.isKanjiModeEnabled()&&(S=s.BYTE),S){case s.NUMERIC:return new n(M);case s.ALPHANUMERIC:return new t(M);case s.KANJI:return new o(M);case s.BYTE:return new r(M)}}i.fromArray=function(R){return R.reduce(function(S,A){return"string"==typeof A?S.push(L(A,null)):A.data&&S.push(L(A.data,A.mode)),S},[])},i.fromString=function(R,S){const v=function I(M){const R=[];for(let S=0;S<M.length;S++){const A=M[S];switch(A.mode){case s.NUMERIC:R.push([A,{data:A.data,mode:s.ALPHANUMERIC,length:A.length},{data:A.data,mode:s.BYTE,length:A.length}]);break;case s.ALPHANUMERIC:R.push([A,{data:A.data,mode:s.BYTE,length:A.length}]);break;case s.KANJI:R.push([A,{data:A.data,mode:s.BYTE,length:m(A.data)}]);break;case s.BYTE:R.push([{data:A.data,mode:s.BYTE,length:m(A.data)}])}}return R}(P(R,c.isKanjiModeEnabled())),F=function b(M,R){const S={},A={start:{}};let v=["start"];for(let F=0;F<M.length;F++){const d=M[F],C=[];for(let g=0;g<d.length;g++){const a=d[g],f=""+F+g;C.push(f),S[f]={node:a,lastCount:0},A[f]={};for(let E=0;E<v.length;E++){const h=v[E];S[h]&&S[h].node.mode===a.mode?(A[h][f]=w(S[h].lastCount+a.length,a.mode)-w(S[h].lastCount,a.mode),S[h].lastCount+=a.length):(S[h]&&(S[h].lastCount=a.length),A[h][f]=w(a.length,a.mode)+4+s.getCharCountIndicator(a.mode,R))}}v=C}for(let F=0;F<v.length;F++)A[v[F]].end=0;return{map:A,table:S}}(v,S),d=u.find_path(F.map,"start","end"),C=[];for(let g=1;g<d.length-1;g++)C.push(F.table[d[g]].node);return i.fromArray(function y(M){return M.reduce(function(R,S){const A=R.length-1>=0?R[R.length-1]:null;return A&&A.mode===S.mode?(R[R.length-1].data+=S.data,R):(R.push(S),R)},[])}(C))},i.rawSplit=function(R){return i.fromArray(P(R,c.isKanjiModeEnabled()))}},9089:(N,i)=>{let l;const s=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];i.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return 4*t+17},i.getSymbolTotalCodewords=function(t){return s[t]},i.getBCHDigit=function(n){let t=0;for(;0!==n;)t++,n>>>=1;return t},i.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');l=t},i.isKanjiModeEnabled=function(){return typeof l<"u"},i.toSJIS=function(t){return l(t)}},377:(N,i)=>{i.isValid=function(s){return!isNaN(s)&&s>=1&&s<=40}},1252:(N,i,l)=>{const s=l(9089),n=l(3677),t=l(7424),r=l(1677),o=l(377),c=s.getBCHDigit(7973);function m(w,y){return r.getCharCountIndicator(w,y)+4}function p(w,y){let I=0;return w.forEach(function(b){const L=m(b.mode,y);I+=L+b.getBitsLength()}),I}i.from=function(y,I){return o.isValid(y)?parseInt(y,10):I},i.getCapacity=function(y,I,b){if(!o.isValid(y))throw new Error("Invalid QR Code version");typeof b>"u"&&(b=r.BYTE);const R=8*(s.getSymbolTotalCodewords(y)-n.getTotalCodewordsCount(y,I));if(b===r.MIXED)return R;const S=R-m(b,y);switch(b){case r.NUMERIC:return Math.floor(S/10*3);case r.ALPHANUMERIC:return Math.floor(S/11*2);case r.KANJI:return Math.floor(S/13);default:return Math.floor(S/8)}},i.getBestVersionForData=function(y,I){let b;const L=t.from(I,t.M);if(Array.isArray(y)){if(y.length>1)return function P(w,y){for(let I=1;I<=40;I++)if(p(w,I)<=i.getCapacity(I,y,r.MIXED))return I}(y,L);if(0===y.length)return 1;b=y[0]}else b=y;return function u(w,y,I){for(let b=1;b<=40;b++)if(y<=i.getCapacity(b,I,w))return b}(b.mode,b.getLength(),L)},i.getEncodedBits=function(y){if(!o.isValid(y)||y<7)throw new Error("Invalid QR Code version");let I=y<<12;for(;s.getBCHDigit(I)-c>=0;)I^=7973<<s.getBCHDigit(I)-c;return y<<12|I}},4649:(N,i,l)=>{const s=l(7077);i.render=function(o,e,c){let u=c,m=e;typeof u>"u"&&(!e||!e.getContext)&&(u=e,e=void 0),e||(m=function t(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),u=s.getOptions(u);const p=s.getImageWidth(o.modules.size,u),P=m.getContext("2d"),w=P.createImageData(p,p);return s.qrToImageData(w.data,o,u),function n(r,o,e){r.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=e,o.width=e,o.style.height=e+"px",o.style.width=e+"px"}(P,m,p),P.putImageData(w,0,0),m},i.renderToDataURL=function(o,e,c){let u=c;return typeof u>"u"&&(!e||!e.getContext)&&(u=e,e=void 0),u||(u={}),i.render(o,e,u).toDataURL(u.type||"image/png",(u.rendererOpts||{}).quality)}},6511:(N,i,l)=>{const s=l(7077);function n(o,e){const c=o.a/255,u=e+'="'+o.hex+'"';return c<1?u+" "+e+'-opacity="'+c.toFixed(2).slice(1)+'"':u}function t(o,e,c){let u=o+e;return typeof c<"u"&&(u+=" "+c),u}i.render=function(e,c,u){const m=s.getOptions(c),p=e.modules.size,P=e.modules.data,w=p+2*m.margin,y=m.color.light.a?"<path "+n(m.color.light,"fill")+' d="M0 0h'+w+"v"+w+'H0z"/>':"",I="<path "+n(m.color.dark,"stroke")+' d="'+function r(o,e,c){let u="",m=0,p=!1,P=0;for(let w=0;w<o.length;w++){const y=Math.floor(w%e),I=Math.floor(w/e);!y&&!p&&(p=!0),o[w]?(P++,w>0&&y>0&&o[w-1]||(u+=p?t("M",y+c,.5+I+c):t("m",m,0),m=0,p=!1),y+1<e&&o[w+1]||(u+=t("h",P),P=0)):m++}return u}(P,p,m.margin)+'"/>',M='<svg xmlns="http://www.w3.org/2000/svg" '+(m.width?'width="'+m.width+'" height="'+m.width+'" ':"")+'viewBox="0 0 '+w+" "+w+'" shape-rendering="crispEdges">'+y+I+"</svg>\n";return"function"==typeof u&&u(null,M),M}},7077:(N,i)=>{function l(s){if("number"==typeof s&&(s=s.toString()),"string"!=typeof s)throw new Error("Color should be defined as hex string");let n=s.slice().replace("#","").split("");if(n.length<3||5===n.length||n.length>8)throw new Error("Invalid hex color: "+s);(3===n.length||4===n.length)&&(n=Array.prototype.concat.apply([],n.map(function(r){return[r,r]}))),6===n.length&&n.push("F","F");const t=parseInt(n.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:255&t,hex:"#"+n.slice(0,6).join("")}}i.getOptions=function(n){n||(n={}),n.color||(n.color={});const r=n.width&&n.width>=21?n.width:void 0;return{width:r,scale:r?4:n.scale||4,margin:typeof n.margin>"u"||null===n.margin||n.margin<0?4:n.margin,color:{dark:l(n.color.dark||"#000000ff"),light:l(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},i.getScale=function(n,t){return t.width&&t.width>=n+2*t.margin?t.width/(n+2*t.margin):t.scale},i.getImageWidth=function(n,t){const r=i.getScale(n,t);return Math.floor((n+2*t.margin)*r)},i.qrToImageData=function(n,t,r){const o=t.modules.size,e=t.modules.data,c=i.getScale(o,r),u=Math.floor((o+2*r.margin)*c),m=r.margin*c,p=[r.color.light,r.color.dark];for(let P=0;P<u;P++)for(let w=0;w<u;w++){let y=4*(P*u+w),I=r.color.light;P>=m&&w>=m&&P<u-m&&w<u-m&&(I=p[e[Math.floor((P-m)/c)*o+Math.floor((w-m)/c)]?1:0]),n[y++]=I.r,n[y++]=I.g,n[y++]=I.b,n[y]=I.a}}}}]);