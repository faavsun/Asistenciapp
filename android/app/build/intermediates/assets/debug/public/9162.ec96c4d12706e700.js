"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9162],{9162:(x,h,t)=>{t.r(h),t.d(h,{HomeProfesorPageModule:()=>D});var g=t(177),b=t(4341),c=t(4742),d=t(4964),m=t(467),o=t(3953),y=t(2518),S=t(7133),F=t(92),H=t(9415);function _(r,a){if(1&r){const s=o.RV6();o.j41(0,"ion-item",11),o.bIt("click",function(){const n=o.eBV(s).$implicit,i=o.XpG(3);return o.Njj(i.abrirDetalleSeccion(n.id))}),o.j41(1,"ion-label"),o.EFF(2),o.k0s(),o.j41(3,"ion-label"),o.EFF(4),o.k0s()()}if(2&r){const s=a.$implicit;o.R7$(2),o.SpI("Secci\xf3n: ",s.nombre,""),o.R7$(2),o.SpI("Profesor: ",s.profesor,"")}}function A(r,a){if(1&r&&(o.j41(0,"ion-list"),o.DNE(1,_,5,2,"ion-item",10),o.k0s()),2&r){const s=o.XpG().$implicit,e=o.XpG();o.R7$(),o.Y8G("ngForOf",e.seccionesPorAsignatura[s.uid])}}function j(r,a){if(1&r){const s=o.RV6();o.j41(0,"ion-accordion",5),o.bIt("ionChange",function(){const n=o.eBV(s).$implicit,i=o.XpG();return o.Njj(i.cargarSecciones(n.uid))}),o.j41(1,"ion-item",6),o.nrm(2,"ion-icon",7),o.j41(3,"ion-label"),o.EFF(4),o.k0s()(),o.j41(5,"div",8),o.DNE(6,A,2,1,"ion-list",9),o.k0s()()}if(2&r){const s=a.$implicit,e=o.XpG();o.R7$(4),o.JRh(s.nombre),o.R7$(2),o.Y8G("ngIf",e.seccionesPorAsignatura[s.uid])}}const R=[{path:"",component:(()=>{var r;class a{constructor(e,n,i){this.router=e,this.appComponent=n,this.menuCtrl=i,this.firebaseSvc=(0,o.WQX)(S.f),this.utilsSvc=(0,o.WQX)(y.T),this.asignaturas=[],this.seccionesPorAsignatura={}}obtenerTodasLasAsignaturas(e){var n=this;return(0,m.A)(function*(){const i=yield n.utilsSvc.loading();yield i.present();try{const f=(yield n.firebaseSvc.getAllSecciones()).filter(u=>u.profesor===e),G=[...new Set(f.map(u=>u.asignatura))].map(function(){var u=(0,m.A)(function*(v){const P=yield n.firebaseSvc.getAsignaturaPorId(v),T=yield n.firebaseSvc.getProfesorNombre(e);return P?{uid:P.uid,nombre:P.nombre,profesorNombre:T.name||"Desconocido"}:null});return function(v){return u.apply(this,arguments)}}()),I=(yield Promise.all(G)).filter(u=>null!==u);n.asignaturas=I,console.log("Asignaturas obtenidas para el profesor:",n.asignaturas)}catch(l){console.error("Error al obtener las asignaturas:",l)}finally{i.dismiss()}})()}cargarSecciones(e){var n=this;return(0,m.A)(function*(){if(!n.seccionesPorAsignatura[e]){const i=yield n.firebaseSvc.getAllSecciones();n.seccionesPorAsignatura[e]=yield Promise.all(i.filter(l=>l.asignatura===e&&l.profesor===n.user().uid).map(function(){var l=(0,m.A)(function*(f){const p=yield n.firebaseSvc.getProfesorNombre(f.profesor);return{id:f.id,nombre:f.nombre,profesor:p.name+" "+p.lastname||"Desconocido"}});return function(f){return l.apply(this,arguments)}}()))}})()}ngOnInit(){var e=this;return(0,m.A)(function*(){const n=e.user();if(n&&n.uid)try{yield e.obtenerTodasLasAsignaturas(n.uid);for(const i of e.asignaturas)yield e.cargarSecciones(i.uid)}catch(i){console.error("Error al obtener las asignaturas:",i)}else console.error("El UID del profesor no est\xe1 disponible."),e.firebaseSvc.resetUserData()})()}user(){return this.utilsSvc.getFromLocalStorage("user")}abrirDetalleSeccion(e){console.log("ID de la secci\xf3n:",e),this.router.navigate(["/main-profesor/ramos-profesor",e])}}return(r=a).\u0275fac=function(e){return new(e||r)(o.rXU(d.Ix),o.rXU(F.Z),o.rXU(c._t))},r.\u0275cmp=o.VBU({type:r,selectors:[["app-home-profesor"]],decls:8,vars:2,consts:[["titulo","Profesor"],[1,"ion-padding"],["lines","inset","mode","ios",1,"scrollable-list",3,"inset"],["mode","ios","color","tertiary",1,"ion-text-center"],[3,"ionChange",4,"ngFor","ngForOf"],[3,"ionChange"],["slot","header"],["name","book-outline","slot","start"],["slot","content",1,"ion-padding"],[4,"ngIf"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"]],template:function(e,n){1&e&&(o.nrm(0,"app-encabezado",0),o.j41(1,"ion-content",1)(2,"ion-list",2)(3,"ion-list-header",3)(4,"ion-label"),o.EFF(5,"Lista de asignaturas"),o.k0s()(),o.j41(6,"ion-accordion-group"),o.DNE(7,j,7,2,"ion-accordion",4),o.k0s()()()),2&e&&(o.R7$(2),o.Y8G("inset",!0),o.R7$(5),o.Y8G("ngForOf",n.asignaturas))},dependencies:[g.Sq,g.bT,c.xk,c.YH,c.W9,c.iq,c.uz,c.he,c.nf,c.AF,H.w],styles:['@charset "UTF-8";.scrollable-list[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}']}),a})()}];let $=(()=>{var r;class a{}return(r=a).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.$C({type:r}),r.\u0275inj=o.G2t({imports:[d.iI.forChild(R),d.iI]}),a})();var C=t(5553);let D=(()=>{var r;class a{}return(r=a).\u0275fac=function(e){return new(e||r)},r.\u0275mod=o.$C({type:r}),r.\u0275inj=o.G2t({imports:[g.MD,b.YN,c.bv,$,C.h]}),a})()}}]);